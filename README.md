# tiny-lattice

```
echo "京都東京都京都" | cargo run --release -p tokenize -- -d tinylattice/src/tests/resources/lex.csv -m tinylattice/src/tests/resources/matrix_10x10.def -c tinylattice/src/tests/resources/char.def -u tinylattice/src/tests/resources/unk.def
```

```
wget http://jaist.dl.sourceforge.net/project/mecab/mecab-ipadic/2.7.0-20070801/mecab-ipadic-2.7.0-20070801.tar.gz
tar -xzf mecab-ipadic-2.7.0-20070801.tar.gz
mv mecab-ipadic-2.7.0-20070801 mecab-ipadic
```

```
wget https://osdn.jp/projects/unidic/downloads/58338/unidic-mecab-2.1.2_src.zip
unzip unidic-mecab-2.1.2_src.zip
mv unidic-mecab-2.1.2_src unidic-mecab
```

```
echo "日本語の形態素解析を行うことができます。" | cargo run --release -p tokenize -- -r resources_mecab-ipadic
```

```
cargo run --release -p tokenize -- -r resources_mecab-ipadic -w < wagahaiwa_nekodearu.txt > tok-ipadic.txt
cargo run --release -p tokenize -- -r resources_mecab-unidic -w < wagahaiwa_nekodearu.txt > tok-unidic.txt
```

```
cargo run --release -p exp_timeperf -- -r resources_ipadic-mecab-2_7_0 -s wagahaiwa_nekodearu.txt
cargo run --release -p exp_timeperf -- -r resources_unidic-mecab-2_1_2 -s wagahaiwa_nekodearu.txt
cargo run --release -p exp_timeperf -- -r resources_unidic-cwj-3_1_0 -s wagahaiwa_nekodearu.txt
```

```
cargo run --release -p exp_timeperf -- -r resources_unidic-cwj-3_1_0 -s wagahaiwa_nekodearu.txt -m waganeko-mapping/unidic-cwj-3_1_0
```

```
echo "偸《ぬす》み" | cargo run --release -p tokenize -- -r resources_mecab-ipadic
```

以下のようになってほしい

```
% ./tokenize/a.out 
偸《ぬす》み
偸      名詞,一般,*,*,*,*,*
《      記号,括弧開,*,*,*,*,《,《,《
ぬ      助動詞,*,*,*,特殊・ヌ,基本形,ぬ,ヌ,ヌ
す      名詞,一般,*,*,*,*,す,ス,ス
》      記号,括弧閉,*,*,*,*,》,》,》
み      接頭詞,名詞接続,*,*,*,*,み,ミ,ミ
EOS
```

KANJIが別の文字を巻き込んで未知語を作ったときのコストはどうなる？
=> そもそも別のカテゴリの文字はマージされないようにする必要があった。

## 記号の扱い

tinylattice

``` 
——ともかくも
——      記号,一般,*,*,*,*,——,——,——
ともかく        副詞,一般,*,*,*,*,ともかく,トモカク,トモカク
も      助詞,係助詞,*,*,*,*,も,モ,モ
EOS
```

lindera

```
——ともかくも
——      記号,一般,*,*,*,*,——,——,——
ともかく        副詞,一般,*,*,*,*,ともかく,トモカク,トモカク
も      助詞,係助詞,*,*,*,*,も,モ,モ
EOS
```

MeCab

```
——ともかくも
——      名詞,サ変接続,*,*,*,*,*
とも    助詞,副助詞,*,*,*,*,とも,トモ,トモ
かく    名詞,一般,*,*,*,*,かく,カク,カク
も      助詞,係助詞,*,*,*,*,も,モ,モ
EOS
```

MeCabはちょっと違う？

## Case 2

Tiny & Mecab

```
［＃］：
［      記号,括弧開,*,*,*,*,［,［,［
＃］：  名詞,サ変接続,*,*,*,*,*
EOS
```

```
［＃］：
［＃］：        UNK
EOS
```

# vs Mecab

on Unidic-mecab

```
。山上の
。                      。      補助記号-句点
山      ヤマ    ヤマ    山      名詞-普通名詞-一般                      2
上      ジョー  ジョウ  上      接尾辞-名詞的-副詞可能
の      ノ      ノ      の      助詞-格助詞
EOS
```

```
。山上の
。      補助記号,句点,*,*,*,*,,。,。,,。,,記号,*,*,*,*
山上    名詞,普通名詞,一般,*,*,*,サンジョウ,山上,山上,サンジョー,山上,サンジョー,漢,*,*,*,*
の      助詞,格助詞,*,*,*,*,ノ,の,の,ノ,の,ノ,和,*,*,*,*
EOS
```

タイブレークっぽい。。

```
Quid aliud est mulier nisi amicitiae& inimica
Quid    名詞,普通名詞,一般,*,*,*        9       12526 (UNK)
        空白,*,*,*,*,*  1       18214 (UNK)
aliud   名詞,普通名詞,一般,*,*,*        9       29609 (UNK)
        空白,*,*,*,*,*  1       35297 (UNK)
e       記号,文字,*,*,*,*,イー,Ｅ,e,イー,e,イー,記号,*,*,*,*    75      40545
s       記号,文字,*,*,*,*,エス,Ｓ,s,エス,s,エス,記号,*,*,*,*    90      42372
t       記号,文字,*,*,*,*,ティー,Ｔ,t,ティー,t,ティー,記号,*,*,*,*      91      44850
        空白,*,*,*,*,*  1       52088 (UNK)
mulier  名詞,普通名詞,一般,*,*,*        9       63483 (UNK)
        空白,*,*,*,*,*  1       69171 (UNK)
nisi    名詞,普通名詞,一般,*,*,*        9       80566 (UNK)
        空白,*,*,*,*,*  1       86254 (UNK)
amicitiae       名詞,普通名詞,一般,*,*,*        9       97649 (UNK)
&       補助記号,一般,*,*,*,*,,＆,&,,&,,記号,*,*,*,*    6       98279
        空白,*,*,*,*,*  1       104601 (UNK)
inimica 名詞,普通名詞,一般,*,*,*        9       115996 (UNK)
EOS
```

```
Quid aliud est mulier nisi amicitiae& inimica
0 BOS BOS/EOS,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,* 0 0 0 0 0 0 2 1 0.000000 0.000000 0.000000 0
1 Q 記号,文字,*,*,*,*,キュー,Ｑ,Q,キュー,Q,キュー,記号,*,*,*,*,キュー,キュー,キュー,キュー,*,*,1,*,* 0 1 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 4685
7 u 記号,文字,*,*,*,*,ユー,Ｕ,u,ユー,u,ユー,記号,*,*,*,*,ユー,ユー,ユー,ユー,*,*,1,*,* 1 2 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 6628
13 i 記号,文字,*,*,*,*,アイ,Ｉ,i,アイ,i,アイ,記号,*,*,*,*,アイ,アイ,アイ,アイ,*,*,1,*,* 2 3 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 8609
19 d 記号,文字,*,*,*,*,ディー,Ｄ,d,ディー,d,ディー,記号,*,*,*,*,ディー,ディー,ディー,ディー,*,*,1,*,* 3 4 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 11046
25 a 記号,文字,*,*,*,*,エー,Ａ,a,エー,a,エー,記号,*,*,*,*,エー,エー,エー,エー,*,*,1,*,* 5 6 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 13486
31 l 記号,文字,*,*,*,*,エル,Ｌ,l,エル,l,エル,記号,*,*,*,*,エル,エル,エル,エル,*,*,1,*,* 6 7 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 16293
37 i 記号,文字,*,*,*,*,アイ,Ｉ,i,アイ,i,アイ,記号,*,*,*,*,アイ,アイ,アイ,アイ,*,*,1,*,* 7 8 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 18274
43 u 記号,文字,*,*,*,*,ユー,Ｕ,u,ユー,u,ユー,記号,*,*,*,*,ユー,ユー,ユー,ユー,*,*,1,*,* 8 9 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 20217
49 d 記号,文字,*,*,*,*,ディー,Ｄ,d,ディー,d,ディー,記号,*,*,*,*,ディー,ディー,ディー,ディー,*,*,1,*,* 9 10 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 22654
55 e 記号,文字,*,*,*,*,イー,Ｅ,e,イー,e,イー,記号,*,*,*,*,イー,イー,イー,イー,*,*,1,*,* 11 12 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 25203
61 s 記号,文字,*,*,*,*,エス,Ｓ,s,エス,s,エス,記号,*,*,*,*,エス,エス,エス,エス,*,*,1,*,* 12 13 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 27030
67 t 記号,文字,*,*,*,*,ティー,Ｔ,t,ティー,t,ティー,記号,*,*,*,*,ティー,ティー,ティー,ティー,*,*,1,*,* 13 14 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 29508
73 m 記号,文字,*,*,*,*,エム,Ｍ,m,エム,m,エム,記号,*,*,*,*,エム,エム,エム,エム,*,*,1,*,* 15 16 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 31631
79 u 記号,文字,*,*,*,*,ユー,Ｕ,u,ユー,u,ユー,記号,*,*,*,*,ユー,ユー,ユー,ユー,*,*,1,*,* 16 17 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 33574
85 l 記号,文字,*,*,*,*,エル,Ｌ,l,エル,l,エル,記号,*,*,*,*,エル,エル,エル,エル,*,*,1,*,* 17 18 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 36381
91 i 記号,文字,*,*,*,*,アイ,Ｉ,i,アイ,i,アイ,記号,*,*,*,*,アイ,アイ,アイ,アイ,*,*,1,*,* 18 19 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 38362
97 e 記号,文字,*,*,*,*,イー,Ｅ,e,イー,e,イー,記号,*,*,*,*,イー,イー,イー,イー,*,*,1,*,* 19 20 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 40911
103 r 記号,文字,*,*,*,*,アール,Ｒ,r,アール,r,アール,記号,*,*,*,*,アール,アール,アール,アール,*,*,"1,0",*,* 20 21 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 43662
109 n 記号,文字,*,*,*,*,エヌ,Ｎ,n,エヌ,n,エヌ,記号,*,*,*,*,エヌ,エヌ,エヌ,エヌ,*,*,1,*,* 22 23 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 45610
115 i 記号,文字,*,*,*,*,アイ,Ｉ,i,アイ,i,アイ,記号,*,*,*,*,アイ,アイ,アイ,アイ,*,*,1,*,* 23 24 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 47591
121 s 記号,文字,*,*,*,*,エス,Ｓ,s,エス,s,エス,記号,*,*,*,*,エス,エス,エス,エス,*,*,1,*,* 24 25 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 49418
127 i 記号,文字,*,*,*,*,アイ,Ｉ,i,アイ,i,アイ,記号,*,*,*,*,アイ,アイ,アイ,アイ,*,*,1,*,* 25 26 5978 5978 1 5 0 1 0.000000 0.000000 0.000000 51399
134 amicitiae 名詞,普通名詞,一般,*,*,* 27 36 5139 5139 1 5 1 1 0.000000 0.000000 0.000000 64630
187 & 補助記号,一般,*,*,*,*,,＆,&,,&,,記号,*,*,*,*,,,,,*,*,*,*,* 36 37 5969 5969 1 3 0 1 0.000000 0.000000 0.000000 65260
190 inimica 名詞,普通名詞,一般,*,*,* 38 45 5139 5139 1 5 1 1 0.000000 0.000000 0.000000 76760
231 EOS BOS/EOS,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,* 45 45 0 0 0 0 3 1 0.000000 0.000000 0.000000 76810
```